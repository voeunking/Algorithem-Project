<!DOCTYPE html>
<html lang="en" data-bs-theme="light">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{% block title %}Library Management System{% endblock %}</title>
  <meta name="description"
    content="Modern Library Management System - Manage books, members, and transactions efficiently">

  <!-- Favicon -->
  <link rel="shortcut icon" href="{{ url_for('static', filename='img/favicon.ico') }}" type="image/x-icon">

  <!-- Bootstrap 5 CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

  <!-- Custom CSS -->
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/modern-style.css') }}">

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">

  <!-- AOS Animation -->
  <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">

  <!-- Custom styles for this template -->
  <style>
    :root {
      --primary-color: #4a6fa5;
      --secondary-color: #6c757d;
      --success-color: #28a745;
      --danger-color: #dc3545;
      --warning-color: #ffc107;
      --info-color: #17a2b8;
      --light-color: #f8f9fa;
      --dark-color: #343a40;
      --body-bg: #f5f7fa;
      --card-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      --transition: all 0.3s ease;
    }

    body {
      font-family: 'Poppins', sans-serif;
      background-color: var(--body-bg);
      color: #333;
      line-height: 1.6;
    }

    /* Toast notifications */
    .toast {
      position: fixed;
      bottom: 20px;
      right: 20px;
      z-index: 9999;
      opacity: 0;
      transition: opacity 0.3s ease-in-out;
      max-width: 300px;
    }

    .toast.show {
      opacity: 1;
    }

    .toast.success {
      background-color: var(--success-color);
      color: white;
    }

    .toast.error {
      background-color: var(--danger-color);
      color: white;
    }

    .toast.info {
      background-color: var(--info-color);
      color: white;
    }
  </style>

  {% block extra_css %}{% endblock %}
</head>

<body class="d-flex flex-column min-vh-100">
  <!-- Top Bar -->
  <div class="top-bar bg-dark text-light py-2 d-none d-md-block">
    <div class="container">
      <div class="row">
        <!-- <div class="col-md-6">
          <i class="fas fa-envelope me-2"></i> info@library.com
          <span class="mx-3">|</span>
          <i class="fas fa-phone me-2"></i> +1 234 567 890
        </div> -->
        <div class="col-md-6 text-end">
          <div class="d-inline-block me-3">
            <a href="#" class="text-light me-2"><i class="fab fa-facebook-f"></i></a>
            <a href="#" class="text-light me-2"><i class="fab fa-twitter"></i></a>
            <a href="#" class="text-light me-2"><i class="fab fa-instagram"></i></a>
            <a href="#" class="text-light"><i class="fab fa-linkedin-in"></i></a>
          </div>
          <div class="d-inline-block">
            <button class="btn btn-sm btn-outline-light" id="themeToggle">
              <i class="fas fa-moon"></i>
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Navigation Bar -->
  <nav class="navbar navbar-expand-lg navbar-dark bg-primary sticky-top shadow-sm">
    <div class="container">
      <a class="navbar-brand d-flex align-items-center" href="/">
        <i class="fas fa-book-open me-2"></i>
        <span class="fw-bold">Library</span>System
      </a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
        <span class="navbar-toggler-icon"></span>
      </button>

      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav me-auto">
          <li class="nav-item">
            <a class="nav-link {% if request.path == '/' %}active{% endif %}" href="/">
              <i class="fas fa-home me-1"></i> Home
            </a>
          </li>
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle {% if '/books' in request.path %}active{% endif %}" href="#"
              id="booksDropdown" role="button" data-bs-toggle="dropdown">
              <i class="fas fa-book me-1"></i> Books
            </a>
            <ul class="dropdown-menu" aria-labelledby="booksDropdown">
              <li><a class="dropdown-item" href="/books"><i class="fas fa-list me-2"></i>All Books</a></li>
              <li><a class="dropdown-item" href="/books/add"><i class="fas fa-plus-circle me-2"></i>Add New Book</a>
              </li>
              <li><a class="dropdown-item" href="/books/popular"><i class="fas fa-star me-2"></i>Popular Books</a></li>
              <li><a class="dropdown-item" href="/books/categories"><i class="fas fa-tags me-2"></i>Categories</a></li>
            </ul>
          </li>
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle {% if '/members' in request.path %}active{% endif %}" href="#"
              id="membersDropdown" role="button" data-bs-toggle="dropdown">
              <i class="fas fa-users me-1"></i> Members
            </a>
            <ul class="dropdown-menu" aria-labelledby="membersDropdown">
              <li><a class="dropdown-item" href="/members"><i class="fas fa-list me-2"></i>All Members</a></li>
              <li><a class="dropdown-item" href="/members/add"><i class="fas fa-user-plus me-2"></i>Add New Member</a>
              </li>
              <li><a class="dropdown-item" href="/members/overdue"><i class="fas fa-clock me-2"></i>Overdue Members</a>
              </li>
            </ul>
          </li>
          <li class="nav-item">
            <a class="nav-link {% if '/transactions' in request.path %}active{% endif %}" href="/transactions">
              <i class="fas fa-exchange-alt me-1"></i> Transactions
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="/reports">
              <i class="fas fa-chart-bar me-1"></i> Reports
            </a>
          </li>
        </ul>

        <!-- Search Form -->
        <!-- <form class="d-flex me-3" action="/search" method="GET">
          <div class="input-group">
            <input class="form-control form-control-sm" type="search" placeholder="Search books..." name="q" aria-label="Search">
            <button class="btn btn-outline-light" type="submit" >
              <i class="fas fa-search"></i>
            </button>
          </div>
        </form> -->

        <!-- User Menu -->
        <div class="dropdown">
          <a class="btn btn-outline-light dropdown-toggle" href="#" role="button" id="userDropdown"
            data-bs-toggle="dropdown">
            <i class="fas fa-user-circle me-1"></i>
            {% if 'user_name' in session %}
            {{ session['user_name'].split(' ')[0] }}
            {% else %}
            Guest
            {% endif %}
          </a>
          <ul class="dropdown-menu dropdown-menu-end">
            {% if 'user_name' in session %}
            <li><a class="dropdown-item" href="/profile"><i class="fas fa-user me-2"></i>My Profile</a></li>
            <li><a class="dropdown-item" href="/settings"><i class="fas fa-cog me-2"></i>Settings</a></li>
            <li>
              <hr class="dropdown-divider">
            </li>
            <li><a class="dropdown-item text-danger" href="/logout"><i class="fas fa-sign-out-alt me-2"></i>Logout</a>
            </li>
            {% else %}
            <li><a class="dropdown-item" href="/login"><i class="fas fa-sign-in-alt me-2"></i>Login</a></li>
            <li><a class="dropdown-item" href="/register"><i class="fas fa-user-plus me-2"></i>Register</a></li>
            {% endif %}
          </ul>
        </div>
      </div>
    </div>
  </nav>

  <!-- Main Content -->
  <main class="flex-grow-1 py-4">
    <!-- Breadcrumb -->
    <nav aria-label="breadcrumb" class="bg-light py-2 mb-4">
      <div class="container">
        <ol class="breadcrumb mb-0">
          <li class="breadcrumb-item"><a href="/" class="text-decoration-none"><i class="fas fa-home"></i> Home</a></li>
          {% block breadcrumb %}{% endblock %}
        </ol>
      </div>
    </nav>

    <!-- Page Content -->
    <div class="{% block container_class %}container{% endblock %}">
      {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
      {% for category, message in messages %}
      <div class="alert alert-{{ category }} alert-dismissible fade show" role="alert">
        {{ message }}
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
      </div>
      {% endfor %}
      {% endif %}
      {% endwith %}

      {% block content %}{% endblock %}
    </div>

    <!-- Back to top button -->
    <button type="button" class="btn btn-primary btn-floating btn-lg rounded-circle" id="btn-back-to-top">
      <i class="fas fa-arrow-up"></i>
    </button>
  </main>

  <!-- Footer
  <footer class="bg-dark text-light py-5 mt-5">
    <div class="container">
      <div class="row g-4">
        <div class="col-lg-4">
          <h5 class="text-uppercase mb-4">About Library</h5>
          <p>Our library provides access to a wide range of books, journals, and digital resources to support learning and research.</p>
          <div class="social-links mt-3">
            <a href="#" class="text-light me-3"><i class="fab fa-facebook-f"></i></a>
            <a href="#" class="text-light me-3"><i class="fab fa-twitter"></i></a>
            <a href="#" class="text-light me-3"><i class="fab fa-instagram"></i></a>
            <a href="#" class="text-light"><i class="fab fa-linkedin-in"></i></a>
          </div>
        </div>
        
        <div class="col-lg-2 col-md-6">
          <h5 class="text-uppercase mb-4">Quick Links</h5>
          <ul class="list-unstyled">
            <li class="mb-2"><a href="/about" class="text-light text-decoration-none">About Us</a></li>
            <li class="mb-2"><a href="/books" class="text-light text-decoration-none">Books</a></li>
            <li class="mb-2"><a href="/members" class="text-light text-decoration-none">Membership</a></li>
            <li class="mb-2"><a href="/events" class="text-light text-decoration-none">Events</a></li>
            <li class="mb-2"><a href="/contact" class="text-light text-decoration-none">Contact</a></li>
          </ul>
        </div>
        
        <div class="col-lg-3 col-md-6">
          <h5 class="text-uppercase mb-4">Opening Hours</h5>
          <ul class="list-unstyled">
            <li class="mb-2">Monday - Friday: 9:00 AM - 8:00 PM</li>
            <li class="mb-2">Saturday: 10:00 AM - 6:00 PM</li>
            <li class="mb-2">Sunday: 12:00 PM - 5:00 PM</li>
            <li class="mb-2">Holidays: Closed</li>
          </ul>
        </div>
        
        <div class="col-lg-3">
          <h5 class="text-uppercase mb-4">Contact Us</h5>
          <address>
            <p><i class="fas fa-map-marker-alt me-2"></i> 123 Library Street, City, Country</p>
            <p><i class="fas fa-phone me-2"></i> +1 234 567 890</p>
            <p><i class="fas fa-envelope me-2"></i> info@library.com</p>
          </address>
          <div class="subscribe-form">
            <h6>Subscribe to our newsletter</h6>
            <form class="mt-3">
              <div class="input-group">
                <input type="email" class="form-control" placeholder="Your email">
                <button class="btn btn-primary" type="submit"><i class="fas fa-paper-plane"></i></button>
              </div>
            </form>
          </div>
        </div>
      </div>
      
      <hr class="my-4">
      
      <div class="row">
        <div class="col-md-6 text-center text-md-start">
          <p class="mb-0">&copy; {{ now().strftime('%Y') if now else '2025' }} Library Management System. All rights reserved.</p>
        </div>
        <div class="col-md-6 text-center text-md-end">
          <a href="#" class="text-light text-decoration-none me-3">Privacy Policy</a>
          <a href="#" class="text-light text-decoration-none me-3">Terms of Service</a>
          <a href="#" class="text-light text-decoration-none">Sitemap</a>
        </div>
      </div>
    </div>
  </footer> -->

  <!-- Bootstrap JS Bundle with Popper -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

  <!-- AOS Animation -->
  <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>

  <!-- Custom JS -->
  <script src="{{ url_for('static', filename='js/main.js') }}"></script>

  <!-- Initialize AOS -->
  <script>
    document.addEventListener('DOMContentLoaded', function () {
      AOS.init({
        duration: 800,
        easing: 'ease-in-out',
        once: true
      });

      // Back to top button
      const backToTopButton = document.getElementById("btn-back-to-top");

      // When the user scrolls down 20px from the top of the document, show the button
      window.onscroll = function () {
        if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {
          backToTopButton.style.display = "block";
        } else {
          backToTopButton.style.display = "none";
        }
      };

      // When the user clicks on the button, scroll to the top of the document
      backToTopButton.addEventListener("click", function () {
        window.scrollTo({
          top: 0,
          behavior: "smooth"
        });
      });

      // Theme toggle functionality
      const themeToggle = document.getElementById('themeToggle');
      const html = document.documentElement;

      // Check for saved user preference, if any, on load
      const savedTheme = localStorage.getItem('theme') || 'light';
      setTheme(savedTheme);

      // Toggle theme on button click
      themeToggle.addEventListener('click', () => {
        const currentTheme = html.getAttribute('data-bs-theme');
        const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
        setTheme(newTheme);
        localStorage.setItem('theme', newTheme);
      });

      function setTheme(theme) {
        html.setAttribute('data-bs-theme', theme);
        const icon = theme === 'dark' ? 'sun' : 'moon';
        themeToggle.innerHTML = `<i class="fas fa-${icon}"></i>`;
      }
    });
  </script>

  {% block extra_js %}{% endblock %}
</body>

</html>